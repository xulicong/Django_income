(function(t){function s(){this.getFontfaceCommon=function(n,t){if(n.AccessKey&&n.Content){var i=n.AccessKey,u=n.Content;r.FontProcessModule.getInitFontInfo(i,function(f){var e=[];for(var o in u)e.push(u.charCodeAt(o));r.FontProcessModule.getGlyfs(f,e,i,t,n)},t,!1)}}}function h(){this.getFontFace=function(n,t){f.getFontfaceCommon(n,function(i){r.FontProcessModule.ApplyTagsStylesAppendHead(n.Tag,n.UserFontFamily);t&&t(i)})};this.fullLoadFont=function(n,t){var i=r.FontProcessModule.GetAccesKey(n);if(!i||i===" "){t&&t({AccessKey:"",FontFamily:"",Tag:"",ErrorMessage:"请输入AccessKey!",Code:304});return}r.FontProcessModule.getInitFontInfo(i,function(u){r.FontProcessModule.getGlyphPack(u,i,function(i){r.FontProcessModule.ApplyTagsStylesAppendHead(n.Tag,n.UserFontFamily);t&&t(i)},n)},t,!0)};this.getBatchFontFace=function(n,t){var i={FontfaceList:[]},s,e,u,o;if(typeof Promise=="function"){for(s=function(t){return new Promise(function(u,e){try{f.getFontfaceCommon(n.Tags[t],function(f){i.FontfaceList.push(f);r.FontProcessModule.ApplyTagsStylesAppendHead(n.Tags[t].Tag,n.Tags[t].UserFontFamily);u(1)})}catch(o){e(o)}})},e=[],u=0;u<n.Tags.length;u++)e.push(s(u));Promise.all(e).then(function(){t&&t(i)},function(n){console.warn(n)}).catch(function(n){console.log(n)})}else o=function(u){if(u>=n.Tags.length){t&&typeof t=="function"&&t(i);return}f.getFontfaceCommon(n.Tags[u],function(t){i.FontfaceList.push(t);r.FontProcessModule.ApplyTagsStylesAppendHead(n.Tags[u].Tag,n.Tags[u].UserFontFamily);o(++u)})},o(0)}}function c(){this.getFontFace=function(n){return new Promise(function(t,i){u.getFontFace(n,function(n){n.Code===200?t(n):i(n)})})};this.fullLoadFont=function(n){return new Promise(function(t,i){u.fullLoadFont(n,function(n){typeof n=="string"?i(n):n.Code===200?t(n):i(n)})})};this.getBatchFontFace=function(n){return new Promise(function(t,i){u.getBatchFontFace(n,function(n){for(var f,r={FontfaceList:[]},u=0;u<n.FontfaceList.length;u++)f=n.FontfaceList[u],f.Code!==200&&r.FontfaceList.push(f);r.FontfaceList.length>0?(n.FontfaceList.length=0,i(r)):t(n)})})}}var r=function(){function p(){var t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(window.ActiveXObject)for(t=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp"],n=0;n<t.length;++n)try{return new ActiveXObject(t[n])}catch(i){}throw new Error("XMLHttp object could not be created.");}function lt(n,t,i){return n.setUint8(t,i),t+1}function t(n,t,i){return n.setUint16(t,i),t+2}function l(n,t,i){return n.setUint32(t,i),t+4}function at(n,t,i){var u,f=i-t,r;if(f<=0)return[];for(u=new Array(f),r=t;r<i&&r<n.length;r++)u[r-t]=n[r];return u}function w(n){return n&vt&&(n=n|yt),n}function tt(){this.Id=1;this.FontName="";this.OS2Table=new Uint8Array(1);this.HeadTable=new Uint8Array(1);this.HheaTable=new Uint8Array(1);this.HmtxTable=new Uint8Array(1);this.MaxpTable=new Uint8Array(1);this.NameTable=new Uint8Array(1);this.PostTable=new Uint8Array(1);this.Cvt_Table=new Uint8Array(1);this.FpgmTable=new Uint8Array(1);this.PrepTable=new Uint8Array(1);this.GaspTable=new Uint8Array(1);this.HorizAdvX=9;this.FontFace=""}function g(){this.TableGlyfs=[];this.FontId=null}function y(){this.Id=0;this.Unicode=0;this.GlyfTable=new Uint8Array(1);this.LSB=0;this.HorizAdvX=0;this.SVGPath=""}function o(){this.m_Tag=0;this.m_CheckSum=0;this.m_Offset=0;this.m_Length=0;this.m_CorLength=0;this.m_DataBytes=new Uint8Array(1)}function ii(n){return n&=4294967295,n<0&&(n+=4294967296),n}function ri(n){var t=0;return t=n&4294967295,t<0?t+4294967296:t}function u(n){for(var o,f,r,i=0,u=parseInt(n.length/4),e=new DataView(n.buffer),t=0;t<u;++t)o=e.getUint32(t*4),i=ii(i+o);if(f=n.length-u*4,f>0){for(r=0,t=0;t<4;t++)r=(r<<8)+(t<f?e.getUint8(u*4+t):0);i+=r}return i}function ui(n,t,i,f){var it,e,s,h,c,l,d,g,tt,y,a,p,w,b,k;ttfTableEntryList=[];var ut=pt.createCMapTable(t),ft=wt.createLocaTable(t,f),rt=new Uint8Array(f),et=0;for(it=0;it<t.length;it++)t[it]!=null&&typeof t[it].GlyfTable!="undefined"&&(rt.set(t[it].GlyfTable,et),et+=t[it].GlyfTable.length);return e=new o,e.m_Tag=r.HHEA,e.m_DataBytes=nt.createHheaTable0(),e.m_Offset=i,e.m_Length=e.m_DataBytes.length,e.m_CorLength=e.m_Length+(4-e.m_Length%4)%4,i+=e.m_CorLength,ttfTableEntryList.push(e),s=new o,s.m_Tag=r.HEAD,v.init(),s.m_DataBytes=v.createHeadTable(t,f,n.HeadTable),s.m_CheckSum=u(s.m_DataBytes),s.m_Offset=i,s.m_Length=s.m_DataBytes.length,s.m_CorLength=s.m_Length+(4-s.m_Length%4)%4,i+=s.m_CorLength,ttfTableEntryList.push(s),h=new o,h.m_Tag=r.MAXP,h.m_DataBytes=gt.createMaxpTable(t,n.MaxpTable),h.m_CheckSum=u(h.m_DataBytes),h.m_Offset=i,h.m_Length=h.m_DataBytes.length,h.m_CorLength=h.m_Length+(4-h.m_Length%4)%4,i+=h.m_CorLength,ttfTableEntryList.push(h),c=new o,c.m_Tag=r.OS2,c.m_DataBytes=bt.createOs2Table(t,n.OS2Table,v.yMax,v.yMin),c.m_CheckSum=u(c.m_DataBytes),c.m_Offset=i,c.m_Length=c.m_DataBytes.length,c.m_CorLength=c.m_Length+(4-c.m_Length%4)%4,i+=c.m_CorLength,ttfTableEntryList.push(c),e.m_DataBytes=nt.createHheaTable5(e.m_DataBytes,n.HheaTable,t,v.yMax,v.yMin),e.m_CheckSum=u(e.m_DataBytes),l=new o,l.m_Tag=r.HMTX,l.m_DataBytes=kt.createHmtxTable(t,n.HmtxTable,n.HorizAdvX),l.m_CheckSum=u(l.m_DataBytes),l.m_Offset=i,l.m_Length=l.m_DataBytes.length,l.m_CorLength=l.m_Length+(4-l.m_Length%4)%4,i+=l.m_CorLength,ttfTableEntryList.push(l),d=new o,d.m_Tag=r.CMAP,d.m_DataBytes=ut,d.m_CheckSum=u(ut),d.m_Offset=i,d.m_Length=ut.length,d.m_CorLength=d.m_Length+(4-d.m_Length%4)%4,i+=d.m_CorLength,ttfTableEntryList.push(d),g=new o,g.m_Tag=r.LOCA,g.m_DataBytes=ft,g.m_CheckSum=u(ft),g.m_Offset=i,g.m_Length=ft.length,g.m_CorLength=g.m_Length+(4-g.m_Length%4)%4,i+=g.m_CorLength,ttfTableEntryList.push(g),tt=new o,tt.m_Tag=r.GLYF,tt.m_DataBytes=rt,tt.m_CheckSum=u(rt),tt.m_Offset=i,tt.m_Length=rt.length,tt.m_CorLength=tt.m_Length+(4-tt.m_Length%4)%4,i+=tt.m_CorLength,ttfTableEntryList.push(tt),y=new o,y.m_Tag=r.NAME,y.m_DataBytes=new Uint8Array(n.NameTable),y.m_CheckSum=u(y.m_DataBytes),y.m_Offset=i,y.m_Length=n.NameTable.length,y.m_CorLength=y.m_Length+(4-y.m_Length%4)%4,i+=y.m_CorLength,ttfTableEntryList.push(y),a=new o,a.m_Tag=r.POST,a.m_DataBytes=dt.createPostTable(t,n.PostTable),a.m_CheckSum=u(a.m_DataBytes),a.m_Offset=i,a.m_Length=a.m_DataBytes.length,a.m_CorLength=a.m_Length+(4-a.m_Length%4)%4,i+=a.m_CorLength,ttfTableEntryList.push(a),n.FpgmTable!=null&&n.FpgmTable.length>0&&(p=new o,p.m_Tag=r.CVT_,p.m_DataBytes=new Uint8Array(n.Cvt_Table),p.m_CheckSum=u(p.m_DataBytes),p.m_Offset=i,p.m_Length=n.Cvt_Table.length,p.m_CorLength=p.m_Length+(4-p.m_Length%4)%4,i+=p.m_CorLength,ttfTableEntryList.push(p),w=new o,w.m_Tag=r.FPGM,w.m_DataBytes=new Uint8Array(n.FpgmTable),w.m_CheckSum=u(w.m_DataBytes),w.m_Offset=i,w.m_Length=n.FpgmTable.length,w.m_CorLength=w.m_Length+(4-w.m_Length%4)%4,i+=w.m_CorLength,ttfTableEntryList.push(w),b=new o,b.m_Tag=r.PREP,b.m_DataBytes=new Uint8Array(n.PrepTable),b.m_CheckSum=u(b.m_DataBytes),b.m_Offset=i,b.m_Length=n.PrepTable.length,b.m_CorLength=b.m_Length+(4-b.m_Length%4)%4,i+=b.m_CorLength,ttfTableEntryList.push(b),(n.GaspTable==null||n.GaspTable.length==0)&&(n.GaspTable=new Uint8Array([0,1,0,1,255,255,0,10])),k=new o,k.m_Tag=r.GASP,k.m_DataBytes=new Uint8Array(n.GaspTable),k.m_CheckSum=u(k.m_DataBytes),k.m_Offset=i,k.m_Length=n.GaspTable.length,k.m_CorLength=k.m_Length+(4-k.m_Length%4)%4,i+=k.m_CorLength,ttfTableEntryList.push(k)),ttfTableEntryList}function fi(i,f,e){var v,c,y,w,b,a,s;if(f=f.sort(function(n,t){var i=parseInt(n.Unicode),r=parseInt(t.Unicode);return i===r?0:i<r?-1:1}),f.length===2&&(f[0].Unicode===0&&f[1].Unicode===32||f[0].Unicode===32&&f[1].Unicode===0))return console.log("no glyphs use"),null;for(v=0,c=0;c<f.length;c++)typeof f[c].GlyfTable.length!="undefined"&&f[c].GlyfTable.length>=0&&(v+=f[c].GlyfTable.length);if(v<=0)return null;tablesum=10;tablesum=typeof i.FpgmTable.length=="undefined"||i.FpgmTable.length<=0?10:14;var k=rt.TTF_HEADER+rt.TTF_TABLE_ENTRY*tablesum,d=k,o=k;for(ttfTableEntryList=[],ttfTableEntryList=ui(i,f,o,v,e),y=0;y<ttfTableEntryList.length;y++)d+=ttfTableEntryList[y].m_CorLength;var p=new Uint8Array(d),h=new DataView(p.buffer),g=Math.floor(Math.log(10)/Math.log(2)),nt=Math.pow(2,g)*16,ut=tablesum*16-nt,tt=0;o=0;o=l(h,o,it.VERSION);o=t(h,o,tablesum);o=t(h,o,nt);o=t(h,o,g);o=t(h,o,ut);w=r;w=tablesum===14?r:ti;b=0;for(n in w)for(a in ttfTableEntryList)if(s=ttfTableEntryList[a],s.m_Tag===w[n]){o=l(h,o,s.m_Tag);o=l(h,o,s.m_CheckSum);o=l(h,o,s.m_Offset);o=l(h,o,s.m_Length);break}for(a=0;a<ttfTableEntryList.length;a++)if(s=ttfTableEntryList[a],s.m_Tag==r.HEAD&&(tt=o),s.m_DataBytes!=="undefined"&&typeof s.m_DataBytes!="undefined")for(p.set(s.m_DataBytes,o),o+=s.m_DataBytes.length,b=s.m_Length;b<s.m_CorLength;b++)o=lt(h,o,0);return checkSumAdjustment=ri(it.CHECKSUM_ADJUSTMENT-u(p)),l(h,tt+8,checkSumAdjustment),p}function ei(n,t,i){var r=fi(n,t,i),u;return r==null?null:(u=navigator.sayswho,u.indexOf("IE")>=0)?(console.log("this is ie br,use eot."),ft.ttf2eot(r)):r}function oi(n){return ut?new Uint8Array(n):Array(n)}function f(n,t,i){var r=n instanceof f;this.buffer=r?n.buffer:typeof n=="number"?oi(n):n;this.start=(t||0)+(r?n.start:0);this.length=i||this.buffer.length-this.start;this.offset=0;this.isTyped=!Array.isArray(this.buffer)}function a(){return typeof Map!="undefined"?(Map.prototype.getCount=function(){return this.size},new Map):new et}function et(){var n={};this.has=function(t){return t in n};this.set=function(t,i){n[t]=i};this.remove=function(t){return this.has(t)?(delete n[t],!0):!1};this.get=function(t){return this.has(t)?n[t]:undefined};this.values=function(){var t=[];for(var i in n)this.has(i)&&t.push(n[i]);return t};this.getItems=function(){return n};this.clear=function(){n={}};this.getCount=function(){return Object.keys(n).length}}function ot(){this.glyfMapTable=a()}var e=function(){function u(){}function o(){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,r=i.length;n<r;++n)f[n]=i[n],t[i.charCodeAt(n)]=n;t["-".charCodeAt(0)]=62;t["_".charCodeAt(0)]=63}var f=[],t=[],e=typeof Uint8Array!="undefined"?Uint8Array:Array;o();u.toByteArray=function(n){var i,h,c,r,s,u,f,o;if(n==null)return[];if(f=n.length,f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");for(s=n[f-2]==="="?2:n[f-1]==="="?1:0,u=new e(f*3/4-s),c=s>0?f-4:f,o=0,i=0,h=0;i<c;i+=4,h+=3)r=t[n.charCodeAt(i)]<<18|t[n.charCodeAt(i+1)]<<12|t[n.charCodeAt(i+2)]<<6|t[n.charCodeAt(i+3)],u[o++]=r>>16&255,u[o++]=r>>8&255,u[o++]=r&255;return s===2?(r=t[n.charCodeAt(i)]<<2|t[n.charCodeAt(i+1)]>>4,u[o++]=r&255):s===1&&(r=t[n.charCodeAt(i)]<<10|t[n.charCodeAt(i+1)]<<4|t[n.charCodeAt(i+2)]>>2,u[o++]=r>>8&255,u[o++]=r&255),u};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=102400,n=new Array(r);return u.fromByteArray=function(t){var u=new Uint8Array(t),v=u.byteLength,l=v%3,o=v-l,c=o/3*4,s,h,a,y,f,p,e,w;for(l>0&&(c+=4),c>r&&(r=c,n=new Array(r)),f=0,e=0;e<o;e=e+3)p=u[e]<<16|u[e+1]<<8|u[e+2],s=(p&16515072)>>18,s=u[e]>>2&63,h=(u[e]&3)<<4|u[e+1]>>4&15,a=(u[e+1]&15)<<2|u[e+2]>>6&3,y=u[e+2]&63,n[f]=i[s],n[f+1]=i[h],n[f+2]=i[a],n[f+3]=i[y],f+=4;return(l==1?(s=u[o]>>2&63,h=(u[o]&3)<<4,n[f]=i[s],n[f+1]=i[h],n[f+2]="=",n[f+3]="=",f+=4):l==2&&(s=u[o]>>2&63,h=(u[o]&3)<<4|u[o+1]>>4&15,a=(u[o+1]&15)<<2,n[f]=i[s],n[f+1]=i[h],n[f+2]=i[a],n[f+3]="=",f+=4),c==r)?n.join(""):(w=at(n,0,c),w.join(""))},u}(),vt=32768,yt=4294901760,b={FORMAT:0,LENGTH:2,LANGUAGE:4,DATA_OFFSET:6},c={FORMAT:0,LENGTH:2,LANGUAGE:4,SegCountX2:6,SearchRange:8,EntrySelector:10,RangeShift:12,EndCode:14},pt=function(){function f(){}function u(){this.start=0;this.end=0;this.delta=0}function e(n){return n>32767?n-65536:n<-32767?n+65536:n}function o(n,t){for(var r,s=[],o=0,f=-1,h=-1,i=new u,c=0,l=0;l<n.length;l++){if(r=n[l].Unicode,r<0||r>t)break;f<0?i.start=r:r!=f+1&&(i.end=f,o=c-i.start+h+1,i.delta=e(o),c=i.end,h=o,s.push(i),i=new u,i.start=r);f=r}return f>0&&(i.end=f,o=c-i.start+h+1,i.delta=e(o),s.push(i)),s}function h(n){var f=new Uint8Array(262),t=new DataView(f.buffer);t.setUint16(b.FORMAT,0);t.setUint16(b.LENGTH,262);t.setUint16(b.LANGUAGE,0);var e=n.length>255?255:n.length,r=0,u=b.DATA_OFFSET;for(i=0;i<256;i++){if(r>=e||e<=0)break;i<n[r].Unicode?t.setUint8(u,0):i==n[r].Unicode&&(t.setUint8(u,r),r++);u+=1}return f}function l(n,t){return Math.log(t)/Math.log(n)}function a(n,i){var h=24,a,u,f,v,y,r,e,o,s,p;for(h+=i.length*8,a=new Uint8Array(h),u=new DataView(a.buffer),u.setUint16(c.FORMAT,4),u.setUint16(c.LENGTH,h),u.setUint16(c.LANGUAGE,0),f=i.length+1,u.setUint16(c.SegCountX2,f*2),v=Math.floor(l(2,f)),y=2*Math.pow(2,v),u.setUint16(c.SearchRange,y),u.setUint16(c.EntrySelector,v),u.setUint16(c.RangeShift,2*f-y),r=c.EndCode,e=0;e<i.length;e++)u.setUint16(r,i[e].end),r+=2;for(u.setUint16(r,t),r+=2,u.setUint16(r,0),r+=2,o=0;o<i.length;o++)u.setUint16(r,i[o].start),r+=2;for(u.setUint16(r,t),r+=2,s=0;s<i.length;s++)u.setUint16(r,i[s].delta),r+=2;for(u.setUint16(r,1),r+=2,p=0;p<i.length;p++)u.setUint16(r,0),r+=2;return u.setUint16(r,0),r+=2,a}function v(t){var u=16,o=t!=null?t.length:0,f,i,e,r;u+=o*12;f=new Uint8Array(u);i=new DataView(f.buffer);i.setUint16(0,12);i.setUint16(2,0);i.setUint32(4,u);i.setUint32(8,0);i.setUint32(12,o);e=0;r=16;for(n in t)i.setUint32(r,t[n].start),r+=4,i.setUint32(r,t[n].end),r+=4,i.setUint32(r,e),r+=4,e+=t[n].end-t[n].start+1;return f}function r(n,t,i,r,u){n.setUint16(t,i);n.setUint16(t+2,r);n.setUint32(t+4,u)}var t=65535,s=4294967295;return u.prototype={toString:function(){return"rang =<"+this.start+" "+this.end+">delta="+this.delta+" "}},f.createCMapTable=function(n){var u=new Uint8Array(1),l;if(hasGLyphsOver2Bytes=!1,l=o(n,t),typeof n.length=="undefined"||n.length<=0)return u.buffer;n[n.length-1].Unicode>t&&(hasGLyphsOver2Bytes=!0);var y=hasGLyphsOver2Bytes?o(n,s):null,c=h(n),f=a(n,l),e=y!=null?v(y):null,i=4+(hasGLyphsOver2Bytes?32:24),p=i+c.length+f.length+(e!=null?e.length:0);return u=new Uint8Array(p),cmapDataView=new DataView(u.buffer),cmapDataView.setUint16(0,0),cmapDataView.setUint16(2,hasGLyphsOver2Bytes?4:3),r(cmapDataView,4,0,3,i),r(cmapDataView,12,1,0,i+f.length),r(cmapDataView,20,3,1,i),e!=null&&r(cmapDataView,28,3,10,i+c.length+f.length),u.set(f,i),u.set(c,i+f.length),e!=null&&u.set(e,i+f.length+c.length),u},f}(),wt=function(){function n(){}function t(n,t){return(n.length+1)*(t?2:4)}return n.createLocaTable=function(n,i){for(var o=i<131072,h=t(n,o),s=new Uint8Array(h),e=new DataView(s.buffer),f=0,r=0,u=0;u<n.length;u++)o?(e.setUint16(r,f),r+=2,n[u]!=null&&typeof n[u].GlyfTable.length!="undefined"&&(f+=n[u].GlyfTable.length/2)):(e.setUint32(r,f),r+=4,n[u]!=null&&typeof n[u].GlyfTable.length!="undefined"&&(f+=n[u].GlyfTable.length));return o?(e.setUint16(r,f),r+=2):(e.setUint32(r,f),r+=4),s},n}(),nt=function(){function n(){}var i=36;return n.createHheaTable0=function(){return new Uint8Array(i)},n.createHheaTable5=function(n,i,r,u,f){var o=new DataView(n.buffer),e;return n.set(i.subarray(0,4)),e=4,e=t(o,e,u),e=t(o,e,f),n.set(i.subarray(8,n.length-2),e),e=n.length-2,e=t(o,e,r.length),n},n}(),v=function(){function n(){this.xMin=0;this.yMin=0;this.xMax=0;this.yMax=0}var e=54,i=0,r=0,u=0,f=0;return n.init=function(){i=0;r=0;u=0;f=0;this.xMin=0;this.yMin=0;this.xMax=0;this.yMax=0},n.createHeadTable=function(n,o,s){for(var l,h,a=new Uint8Array(e),c=new DataView(a.buffer),v=0;v<n.length;v++)(l=n[v],l.GlyfTable!=null)&&(i=Math.min(i,k.getXMin(l.GlyfTable)),r=Math.min(r,k.getYMin(l.GlyfTable)),u=Math.max(u,k.getXMax(l.GlyfTable)),f=Math.max(f,k.getYMax(l.GlyfTable)));return h=0,this.xMin=i,this.yMin=r,this.xMax=u,this.yMax=f,a.set(s.subarray(0,36)),h+=36,h=t(c,h,i),h=t(c,h,r),h=t(c,h,u),h=t(c,h,f),a.set(s.subarray(44,50),h),h=50,h=t(c,h,o<131072?0:1),h=t(c,h,0),a},n.getyMin=function(){return this.yMin},n.getyMax=function(){return this.yMax},n}(),k=function(){function n(){}return n.getXMin=function(n){var t=n[2]<<8|n[3];return w(t)},n.getYMin=function(n){var t=n[4]<<8|n[5];return w(t)},n.getXMax=function(n){var t=n[6]<<8|n[7];return w(t)},n.getYMax=function(n){var t=n[8]<<8|n[9];return w(t)},n}(),bt=function(){function n(){}function u(n){for(var t,i=65535,r=0;r<n.length;r++)if(t=n[r],t.Unicode!=0&&t.Unicode<i){i=t.Unicode;break}return i}function f(n){var r=0,u=n.length,t;for(i=u-1;i>=0;i--)if(t=n[i],t.Unicode<=65535&&t.Unicode>r){r=t.Unicode;break}return r}var r=86;return n.createOs2Table=function(n,i,e,o){var h=new Uint8Array(r),c=new DataView(h.buffer),s;return h.set(i.subarray(0,64)),s=64,s=t(c,s,u(n)),s=t(c,s,f(n)),h.set(i.subarray(68,86),s),s=74,s=t(c,s,e<0?-e:e),s=t(c,s,o<0?-o:o),h.set(i.subarray(78,86),s),h},n}(),kt=function(){function n(){}var i=0;return n.createHmtxTable=function(n,r,u){var o;i=n.length*4;var h=new Uint8Array(i),s=new DataView(h.buffer),f=0,e;for(o=0;o<n.length;o++)(e=n[o],e!=null)&&(f=e.HorizAdvX<0?t(s,f,u):t(s,f,e.HorizAdvX),f=t(s,f,e.LSB));return h},n}(),dt=function(){function i(){}function u(){n.size==0&&(n.set(0,".null"),n.set(32,"space"),n.set(160,"space"),n.set(33,"exclam"),n.set(34,"quotedbl"),n.set(35,"numbersign"),n.set(36,"dollar"),n.set(37,"percent"),n.set(38,"ampersand"),n.set(8217,"quoteright"),n.set(40,"parenleft"),n.set(41,"parenright"),n.set(42,"asterisk"),n.set(43,"plus"),n.set(44,"comma"),n.set(45,"hyphen"),n.set(173,"hyphen"),n.set(46,"period"),n.set(47,"slash"),n.set(48,"zero"),n.set(49,"one"),n.set(50,"two"),n.set(51,"three"),n.set(52,"four"),n.set(53,"five"),n.set(54,"six"),n.set(55,"seven"),n.set(56,"eight"),n.set(57,"nine"),n.set(58,"colon"),n.set(59,"semicolon"),n.set(60,"less"),n.set(61,"equal"),n.set(62,"greater"),n.set(63,"question"),n.set(64,"at"),n.set(65,"A"),n.set(66,"B"),n.set(67,"C"),n.set(68,"D"),n.set(69,"E"),n.set(70,"F"),n.set(71,"G"),n.set(72,"H"),n.set(73,"I"),n.set(74,"J"),n.set(75,"K"),n.set(76,"L"),n.set(77,"M"),n.set(78,"N"),n.set(79,"O"),n.set(80,"P"),n.set(81,"Q"),n.set(82,"R"),n.set(83,"S"),n.set(84,"T"),n.set(85,"U"),n.set(86,"V"),n.set(87,"W"),n.set(88,"X"),n.set(89,"Y"),n.set(90,"Z"),n.set(91,"bracketleft"),n.set(92,"backslash"),n.set(93,"bracketright"),n.set(94,"asciicircum"),n.set(95,"underscore"),n.set(8216,"quoteleft"),n.set(97,"a"),n.set(98,"b"),n.set(99,"c"),n.set(100,"d"),n.set(101,"e"),n.set(102,"f"),n.set(103,"g"),n.set(104,"h"),n.set(105,"i"),n.set(106,"j"),n.set(107,"k"),n.set(108,"l"),n.set(109,"m"),n.set(110,"n"),n.set(111,"o"),n.set(112,"p"),n.set(113,"q"),n.set(114,"r"),n.set(115,"s"),n.set(116,"t"),n.set(117,"u"),n.set(118,"v"),n.set(119,"w"),n.set(120,"x"),n.set(121,"y"),n.set(122,"z"),n.set(123,"braceleft"),n.set(124,"bar"),n.set(125,"braceright"),n.set(126,"asciitilde"),n.set(161,"exclamdown"),n.set(162,"cent"),n.set(163,"sterling"),n.set(8260,"fraction"),n.set(8725,"fraction"),n.set(165,"yen"),n.set(402,"florin"),n.set(167,"section"),n.set(164,"currency"),n.set(39,"quotesingle"),n.set(8220,"quotedblleft"),n.set(171,"guillemotleft"),n.set(8249,"guilsinglleft"),n.set(8250,"guilsinglright"),n.set(64257,"fi"),n.set(64258,"fl"),n.set(8211,"endash"),n.set(8224,"dagger"),n.set(8225,"daggerdbl"),n.set(183,"periodcentered"),n.set(8729,"periodcentered"),n.set(182,"paragraph"),n.set(8226,"bullet"),n.set(8218,"quotesinglbase"),n.set(8222,"quotedblbase"),n.set(8221,"quotedblright"),n.set(187,"guillemotright"),n.set(8230,"ellipsis"),n.set(8240,"perthousand"),n.set(191,"questiondown"),n.set(96,"grave"),n.set(180,"acute"),n.set(710,"circumflex"),n.set(732,"tilde"),n.set(175,"macron"),n.set(713,"macron"),n.set(728,"breve"),n.set(729,"dotaccent"),n.set(168,"dieresis"),n.set(730,"ring"),n.set(184,"cedilla"),n.set(733,"hungarumlaut"),n.set(731,"ogonek"),n.set(711,"caron"),n.set(8212,"emdash"),n.set(198,"AE"),n.set(170,"ordfeminine"),n.set(321,"Lslash"),n.set(216,"Oslash"),n.set(338,"OE"),n.set(186,"ordmasculine"),n.set(230,"ae"),n.set(305,"dotlessi"),n.set(322,"lslash"),n.set(248,"oslash"),n.set(339,"oe"),n.set(223,"germandbls"))}function f(n,t){var r=36,i;for(r+=n.length*2,i=0;i<t.length;i++)r+=t[i].length;return r}function e(t){var f=0,i=null,e=0,u="",s,o,r;if(n.has(t.Unicode))u=n.get(t.Unicode),f=u.length<256?u.length:255,i=new Uint8Array(f+1),i[0]=f,e=1;else{for(f=7,i=new Uint8Array(f+1),i[0]=f,i[1]="u".charCodeAt(),i[2]="n".charCodeAt(),i[3]="i".charCodeAt(),s=t.Unicode,o=s.toString(16),u=o,r=0;r<4-o.length;r++)u="0"+u;e=4}for(r=0;r<i.length-e;r++)ch=u[r].charCodeAt(),i[e+r]=ch<128?ch:95;return i}var r=32,n=a();return i.createPostTable=function(n,i){var o=[],c,a,v,s,h;for(u(),c=0;c<n.length;c++)s=n[c],s.Unicode!=0&&o.push(e(s));var p=f(n,o),l=new Uint8Array(p),y=new DataView(l.buffer);for(l.set(i.subarray(0,r)),offset=r,offset=t(y,offset,n.length),a=258,v=0;v<n.length;v++)s=n[v],s.Unicode!=0?(offset=t(y,offset,a),a+=1):(offset=t(y,offset,0),a+=1);for(h=0;h<o.length;h++)l.set(o[h],offset),offset+=o[h].length;return l},i}(),gt=function(){function n(){}var i=32;return n.createMaxpTable=function(n,r){var f=new Uint8Array(i),e=new DataView(f.buffer),u=0;return u=l(e,u,65536),u=t(e,u,n.length),f.set(r.subarray(6,i),u),f},n}(),ni={number:0,msg:""},ut,h,ft;tt.prototype={SetValueByFilename:function(n,t){n.endsWith(".txt")&&(n=n.substring(0,n.lastIndexOf(".txt")));switch(n){case"FontName":this.FontName=t;break;case"OS2Table":this.OS2Table=t;break;case"HeadTable":this.HeadTable=t;break;case"HheaTable":this.HheaTable=t;break;case"HmtxTable":this.HmtxTable=t;break;case"MaxpTable":this.MaxpTable=t;break;case"NameTable":this.NameTable=t;break;case"PostTable":this.PostTable=t;break;case"Cvt_Table":this.Cvt_Table=t;break;case"FpgmTable":this.FpgmTable=t;break;case"PrepTable":this.PrepTable=t;break;case"GaspTable":this.GaspTable=t;break;case"HorizAdvX":this.HorizAdvX=t;break;case"FontFace":this.FontFace=t;break;default:console.log("unknown filename")}}};y.prototype={SetValueByFilename:function(n,t){n.endsWith(".txt")&&(n=n.substring(0,n.lastIndexOf(".txt")));switch(n){case"Id":this.Id=t;break;case"Unicode":this.Unicode=parseInt(t);break;case"GlyfTable":this.GlyfTable=t;break;case"LSB":this.LSB=parseInt(t);break;case"HorizAdvX":this.HorizAdvX=parseInt(t);break;case"SVGPath":this.SVGPath=t;break;default:console.log("unknown filename")}}};var it={VERSION:65536,CHECKSUM_ADJUSTMENT:2981146554},rt={TTF_HEADER:12,TTF_TABLE_ENTRY:16},r={OS2:1330851634,CMAP:1668112752,CVT_:1668707360,FPGM:1718642541,GASP:1734439792,GLYF:1735162214,HEAD:1751474532,HHEA:1751672161,HMTX:1752003704,LOCA:1819239265,MAXP:1835104368,NAME:1851878757,POST:1886352244,PREP:1886545264},ti={OS2:1330851634,CMAP:1668112752,GLYF:1735162214,HEAD:1751474532,HHEA:1751672161,HMTX:1752003704,LOCA:1819239265,MAXP:1835104368,NAME:1851878757,POST:1886352244};ut=typeof Uint8Array!="undefined";f.prototype.getUint8=function(n){return this.buffer[n+this.start]};f.prototype.getUint16=function(n,t){var i;if(t)throw new Error("not implemented");else i=this.buffer[n+1+this.start]+(this.buffer[n+this.start]<<8>>>0);return i};f.prototype.getUint32=function(n,t){var i;if(t)throw new Error("not implemented");else i=this.buffer[n+1+this.start]<<16,i|=this.buffer[n+2+this.start]<<8,i|=this.buffer[n+3+this.start],i+=this.buffer[n+this.start]<<24>>>0;return i};f.prototype.setUint8=function(n,t){this.buffer[n+this.start]=t&255};f.prototype.setUint16=function(n,t,i){var r=n+this.start,u=this.buffer;i?(u[r]=t&255,u[r+1]=t>>>8&255):(u[r]=t>>>8&255,u[r+1]=t&255)};f.prototype.setUint32=function(n,t,i){var r=n+this.start,u=this.buffer;i?(u[r]=t&255,u[r+1]=t>>>8&255,u[r+2]=t>>>16&255,u[r+3]=t>>>24&255):(u[r]=t>>>24&255,u[r+1]=t>>>16&255,u[r+2]=t>>>8&255,u[r+3]=t&255)};f.prototype.fill=function(n){for(var t=this.length-1;t>=0;)this.buffer[t+this.start]=n,t--};f.prototype.writeBytes=function(n){var i=this.buffer,r=this.offset+this.start,t;if(this.isTyped)i.set(n,r);else for(t=0;t<n.length;t++)i[t+r]=n[t];this.offset+=n.length};f.prototype.toString=function(n,t){var i;n=n||0;t=t||this.length-n;var r=n+this.start,f=r+t,u="";for(i=r;i<f;i++)u+=String.fromCharCode(this.buffer[i]);return u};f.prototype.toArray=function(n,t){return(n=n||this.start,t=t||this.length,this.isTyped)?this.buffer.subarray(n,n+t):this.buffer.slice(n,n+t)};h=f;ft=function(){function u(){}function f(n){var t=new h(n.length+4),i;for(t.setUint16(0,n.length,!0),i=0;i<n.length;i+=2)t.setUint16(i+2,n.getUint16(i),!0);return t.setUint16(t.length-2,0,!0),t}var t={LENGTH:0,FONT_LENGTH:4,VERSION:8,CHARSET:26,MAGIC:34,FONT_PANOSE:16,ITALIC:27,WEIGHT:28,UNICODE_RANGE:36,CODEPAGE_RANGE:52,CHECKSUM_ADJUSTMENT:60},n={NUMTABLES:4,TABLE_TAG:0,TABLE_OFFSET:8,TABLE_LENGTH:12,OS2_WEIGHT:4,OS2_FONT_PANOSE:32,OS2_UNICODE_RANGE:42,OS2_FS_SELECTION:62,OS2_CODEPAGE_RANGE:78,HEAD_CHECKSUM_ADJUSTMENT:8,NAMETABLE_FORMAT:0,NAMETABLE_COUNT:2,NAMETABLE_STRING_OFFSET:4,NAME_PLATFORM_ID:0,NAME_ENCODING_ID:2,NAME_LANGUAGE_ID:4,NAME_NAME_ID:6,NAME_LENGTH:8,NAME_OFFSET:10},i={SFNT_TABLE_ENTRY:16,SFNT_HEADER:12,SFNT_NAMETABLE:6,SFNT_NAMETABLE_ENTRY:12,EOT_PREFIX:82},r={EOT_VERSION:131073,EOT_MAGIC:20556,EOT_CHARSET:1,LANGUAGE_ENGLISH:1033};return u.ttf2eot=function(u){var v=new h(u),o=new h(i.EOT_PREFIX),w,e,ut,l,a,p,ft,c;o.fill(0);o.setUint32(t.FONT_LENGTH,v.length,!0);o.setUint32(t.VERSION,r.EOT_VERSION,!0);o.setUint8(t.CHARSET,r.EOT_CHARSET);o.setUint16(t.MAGIC,r.EOT_MAGIC,!0);var b=[],k=[],d=[],g=[],nt=!1,tt=!1,it=!1,et=v.getUint16(n.NUMTABLES);for(w=0;w<et;++w){var rt=new h(v,i.SFNT_HEADER+w*i.SFNT_TABLE_ENTRY),y={tag:rt.toString(n.TABLE_TAG,4),offset:rt.getUint32(n.TABLE_OFFSET),length:rt.getUint32(n.TABLE_LENGTH)},s=new h(v,y.offset,y.length);if(y.tag==="OS/2"){for(nt=!0,e=0;e<10;++e)o.setUint8(t.FONT_PANOSE+e,s.getUint8(n.OS2_FONT_PANOSE+e));for(o.setUint8(t.ITALIC,s.getUint16(n.OS2_FS_SELECTION)&1),o.setUint32(t.WEIGHT,s.getUint16(n.OS2_WEIGHT),!0),e=0;e<4;++e)o.setUint32(t.UNICODE_RANGE+e*4,s.getUint32(n.OS2_UNICODE_RANGE+e*4),!0);for(e=0;e<2;++e)o.setUint32(t.CODEPAGE_RANGE+e*4,s.getUint32(n.OS2_CODEPAGE_RANGE+e*4),!0)}else if(y.tag==="head")it=!0,o.setUint32(t.CHECKSUM_ADJUSTMENT,s.getUint32(n.HEAD_CHECKSUM_ADJUSTMENT),!0);else if(y.tag==="name")for(tt=!0,ut={format:s.getUint16(n.NAMETABLE_FORMAT),count:s.getUint16(n.NAMETABLE_COUNT),stringOffset:s.getUint16(n.NAMETABLE_STRING_OFFSET)},e=0;e<ut.count;++e)if(l=new h(s,i.SFNT_NAMETABLE+e*i.SFNT_NAMETABLE_ENTRY),a={platformID:l.getUint16(n.NAME_PLATFORM_ID),encodingID:l.getUint16(n.NAME_ENCODING_ID),languageID:l.getUint16(n.NAME_LANGUAGE_ID),nameID:l.getUint16(n.NAME_NAME_ID),length:l.getUint16(n.NAME_LENGTH),offset:l.getUint16(n.NAME_OFFSET)},a.platformID===3&&a.encodingID===1&&a.languageID===r.LANGUAGE_ENGLISH){p=f(new h(s,ut.stringOffset+a.offset,a.length));switch(a.nameID){case 1:b=p;break;case 2:k=p;break;case 4:d=p;break;case 5:g=p}}if(nt&&tt&&it)break}if(!(nt&&tt&&it))throw new Error("Required section not found");return ft=o.length+b.length+k.length+g.length+d.length+2+v.length,c=new h(ft),c.writeBytes(o.buffer),c.writeBytes(b.buffer),c.writeBytes(k.buffer),c.writeBytes(g.buffer),c.writeBytes(d.buffer),c.writeBytes([0,0]),c.writeBytes(v.buffer),c.setUint32(t.LENGTH,ft,!0),c},u}();navigator.sayswho=function(){var i=navigator.userAgent,t,n=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(i)||[],"IE "+(t[1]||"")):n[1]==="Chrome"&&(t=i.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=i.match(/version\/(\d+)/i))!=null&&n.splice(1,1,t[1]),n.join(" "))}();ot.prototype={add:function(n,t,i){if(n)return this.glyfMapTable.has(n)?this.glyfMapTable.get(n).add(t,i):(this.glyfMapTable.add(n,a()),this.glyfMapTable.get(n).add(t,i))},"delete":function(n){n&&this.glyfMapTable.delete(n)},get:function(n){return n?this.glyfMapTable.get(n):null},set:function(n,t,i){n&&(this.glyfMapTable.has(n)?this.glyfMapTable.get(n).set(t,i):(this.glyfMapTable.set(n,a()),this.glyfMapTable.get(n).set(t,i)))},has:function(n,t){return n?this.glyfMapTable.has(n)?this.glyfMapTable.get(n).has(t):!1:!1},getOneFontGlyfs:function(n){var t=[],i;return this.glyfMapTable.has(n)?(i=this.glyfMapTable.get(n),this.glyfMapTable instanceof et)?i.values():(i.forEach(function(n,i){n.HorizAdvX==0&&i!=0||t.push(n)}),t):t}};var d=a(),s=new ot,st=a(),ht=0,ct="https:"===document.location.protocol?"https:":"http:",si=function(){function t(){}function b(n,t){n&&(w[n]=t)}function ft(n){var i="yzk-"+n,t=document.getElementById(i);return t?t.getAttribute("fontname"):""}function et(n,t,i){var r=document.getElementById(n);r&&document.getElementsByTagName("head")[0].removeChild(r);k(n,t,i)}function o(n){return n.toString().replace(/(^\s*)|(\s*$)/g,"")}function ot(n,t,i){var u=document,f=document.getElementsByTagName("head")[0],r;if(n=n.replace(/[ |.]/g,"_"),r=u.getElementById(n),r){if(o(r.innerHTML)===t)return;f.removeChild(r)}k(n,t,i)}function k(n,t,i){var r=document.createElement("style");r.setAttribute("type","text/css");n&&r.setAttribute("id",n);i&&r.setAttribute("fontname",i);r.styleSheet?r.styleSheet.cssText=t:document.getBoxObjectFor?r.innerHTML=t:r.appendChild(document.createTextNode(t));document.getElementsByTagName("head")[0].appendChild(r)}function lt(n,t,i,r,u,f,o){var a=navigator.sayswho,h="truetype",v=u.Tag,y=u.UserFontFamily,s,l,c;if(typeof Blob=="function"?(a.indexOf("IE")>=0?(h="embedded-opentype",l=new Blob([t.buffer],{type:"application/octet-stream"})):l=new Blob([t],{type:"application/octet-stream"}),s=URL.createObjectURL(l)):(s=e.fromByteArray(t.buffer),a.indexOf("IE")>=0?(h="embedded-opentype",s="data:application/vnd.ms-fontobject;base64,"+s+"?#iefix"):s="data:application/font-ttf;base64,"+s),c={AccessKey:n,FontFamily:f,Tag:v,ErrorMessage:"",Code:200,FontFace:null},typeof FontFace=="function"){let n=new FontFace(f,"url('"+s+"') format('"+h+"')");n.load().then(function(n){c.FontFace=n;document.fonts.add(n);let i=document.querySelectorAll(v),u;u=y?it(y):f;for(var t=0;t<i.length;t++)i[t].style.fontFamily=u;o||r&&typeof r=="function"&&r(c)}).catch(function(n){console.log(n)})}else{var p=" font-family:'"+f+"' ",w=" @font-face { "+p+"; src:url('"+s+"') format('"+h+"'); }  ",b="yzk-"+n;et(b,w,f);o||r&&typeof r=="function"&&r(c)}}function at(t,u,e,o,a){var tt=[],w=[],v=[],it,d,b,k;if(tt[u.toString()]=t.length,w[u.toString()]="FontId="+u,v[u.toString()]=0,typeof Promise=="function"){for(it=function(t){var r=l+u.toString()+"/"+t;return new Promise(function(e,o){if(t){var h=p();h.open("GET",r,!0);h.responseType="arraybuffer";h.onload=function(){var c;if(h.status===200||h.status===304){if(c=h.response,c){var l=new Uint8Array(c),o=new f(l),r=new y;r.Id=u;r.Unicode=o.getUint16(0,!1);r.LSB=o.getUint16(2,!1);r.HorizAdvX=o.getUint16(4,!1);r.GlyfTable=o.toArray(6);r.HorizAdvX=r.HorizAdvX===65535?-1:r.HorizAdvX;s.set(r.Id,r.Unicode,r),function(t){if(n.support()){var r=n.db.transaction([i],"readwrite").objectStore(i),f=r.get(u);f.onsuccess=function(){var n=f.result,i;n!=undefined?(i=n.TableGlyfs,i.push(t)):(n=new g,n.FontId=u,n.TableGlyfs.push(t));r.put(n)}}}(r)}}else w[u.toString()]=w[u.toString()]+"&Unicodes["+v[u.toString()]+"]="+t,v[u.toString()]=v[u.toString()]+1;e(1)};h.onerror=function(n){o(n)};h.send(null)}else e(-1)})},d=[],b=0;b<t.length;b++)d.push(it(t[b]));function k(){Promise.all(d).then(function(n){n.length>=t.length&&(v[u.toString()]>0?h(c,w[u.toString()],nt,u,e,o,a):r(u,e,o,a))},function(n){console.warn(n)}).catch(function(n){console.log(n)})}k()}else k=function(b){var it,rt,d;if(b>=tt[u.toString()]){v[u.toString()]>0?h(c,w[u.toString()],nt,u,e,o,a):r(u,e,o,a);return}if(it=t[b].toString(),!it){k(++b);return}rt=l+u.toString()+"/"+it;d=p();d.open("GET",rt,!0);d.responseType="arraybuffer";d.onload=function(){var o;if(d.status===200||d.status===304){if(o=d.response,o){var h=new Uint8Array(o),e=new f(h),r=new y;r.Id=u;r.Unicode=e.getUint16(0,!1);r.LSB=e.getUint16(2,!1);r.HorizAdvX=e.getUint16(4,!1);r.GlyfTable=e.toArray(6);r.HorizAdvX=r.HorizAdvX===65535?-1:r.HorizAdvX;s.set(r.Id,r.Unicode,r),function(t){if(n.support()){var r=n.db.transaction([i],"readwrite").objectStore(i),f=r.get(u);f.onsuccess=function(){var n=f.result,i;n!=undefined?(i=n.TableGlyfs,i.push(t)):(n=new g,n.FontId=u,n.TableGlyfs.push(t));r.put(n)}}}(r)}}else w[u.toString()]=w[u.toString()]+"&Unicodes["+v[u.toString()]+"]="+t[b],v[u.toString()]=v[u.toString()]+1;k(++b)};d.send(null)},k(0)}function h(n,t,i,r,u,f,e){var o=p();o.onreadystatechange=function(){if(o.readyState===4){if(o.status!==200&&o.status!==304)return;i(o.responseText,r,u,f,e)}};o.open("POST",n,!0);o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");o.setRequestHeader("Accept","application/json");o.send(t)}function vt(t,r,u,f,o){var a=JSON.parse(t),k,h,c,p,w,g,l,b;if(!a||a.Code!==200){k={AccessKey:u,FontFamily:"",Tag:"",ErrorMessage:a.ErrorMessage,Code:a.Code};o&&typeof o=="function"&&o(k);return}h=new tt;c=a.Head;h.Id=c.FontId;h.OS2Table=e.toByteArray(c.OS2Table);h.HeadTable=e.toByteArray(c.HeadTable);h.HheaTable=e.toByteArray(c.HheaTable);h.HmtxTable=e.toByteArray(c.HmtxTable);h.MaxpTable=e.toByteArray(c.MaxpTable);h.NameTable=e.toByteArray(c.NameTable);h.PostTable=e.toByteArray(c.PostTable);h.Cvt_Table=e.toByteArray(c.Cvt_Table);h.FpgmTable=e.toByteArray(c.FpgmTable);h.PrepTable=e.toByteArray(c.PrepTable);h.GaspTable=e.toByteArray(c.GaspTable);h.HorizAdvX=c.HorizAdvX;h.FontName=c.FontName;ht=h.Id;p=a.GlyfsList;for(w in p)g=e.toByteArray(p[w].GlyfTable),l=new y,l.Id=p[w].FontId,l.Unicode=p[w].Unicode,l.HorizAdvX=p[w].HorizAdvX,l.LSB=p[w].LSB,l.GlyfTable=g,s.set(l.Id,l.Unicode,l);d.set(h.Id,h);b={FontId:h.Id,HasFontGlyphPack:a.HasFontGlyphPack};st.set(u,b);n.support()&&n.openDb(v,function(){console.error("indexDB="+v+"连接数据库失败!")},function(t){n.db=t.target.result;kt(u,b,f)},function(t){n.db=t.target.result;bt(i)},-1)}function nt(t,u,f,o,h){var l=JSON.parse(t),v=0,a,p,c;for(a in l)l[a].Unicode!==0&&(p=e.toByteArray(l[a].GlyfTable),c=new y,c.Id=l[a].FontId,v=c.Id,c.Unicode=l[a].Unicode,c.HorizAdvX=l[a].HorizAdvX,c.LSB=l[a].LSB,c.GlyfTable=p,s.set(c.Id,c.Unicode,c),function(t){if(n.support()){var r=n.db.transaction([i],"readwrite").objectStore(i),u=r.get(t.Id);u.onsuccess=function(){var n=u.result,i;n!=undefined?(i=n.TableGlyfs,i.push(t)):(n=new g,n.FontId=t.Id,n.TableGlyfs.push(t));r.put(n)}}}(c));r(v,f,o,h)}function yt(){this.db=null;this.isOk=!1;this.support=function(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB};this.openDb=function(n,t,i,r,u){var f;f=u<=0?window.indexedDB.open(n):window.indexedDB.open(n,u);f.onerror=function(n){t(n)};f.onsuccess=function(n){i(n)};f.onupgradeneeded=function(n){r(n)}};this.closeDb=function(n){n&&n.close()}}function pt(n,t,i,r){var u=st.get(n),e,o,f;u?(e=u.FontId,o=u.HasFontGlyphPack,t&&typeof t=="function"&&t(e,o)):(f="Type=min&AccessKey="+n,r&&(f+="&FullLoadding="+r),h(rt,f,vt,-1,n,t,i))}function wt(t){if(n.db){var i=null,r=n.db.objectStoreNames;return r.contains(t)||(i=n.db.createObjectStore(t,{keyPath:"FontId"}),i.createIndex("FontIdIndex","FontId",{unique:!0})),i}return console.error("indexDBInstance.db is null!"),null}function bt(n){wt(n)}function kt(t,r,u){var f=r.FontId,o=r.HasFontGlyphPack,h=n.db.transaction([i],"readonly").objectStore(i),e=h.get(f);e.onsuccess=function(){var h=e.result,r,t,i;if(h!=undefined)for(n.isOk=!0,r=h.TableGlyfs,t=0;t<r.length;t++)i=r[t],s.set(i.Id,i.Unicode,i);u&&typeof u=="function"&&u(f,o)}}function r(n,t,i,r,u){if(n===0)return null;var e=d.get(n),o=s.getOneFontGlyfs(n),f=ei(e,o,ni);return f==null?null:(lt(t,f,n,i,r,e.FontName,u),f)}function it(n){var t,i;let r="";for(t=0;t<n.length;t++)i=n[t],r+=t>=n.length-1?"'"+o(i)+"'":"'"+o(i)+"',";return r}var u=a(),rt=ct+"//fs.webfont.com/font/GetFontInfo",c=ct+"//fs.webfont.com/font/GetFontGlyfs",l="//cdn.glyphs.webfont.com/glyfs/",ut="//cdn.glyphs.webfont.com/glyphPacks/",v="youziku_glyphs_db",i="glyphs_store",n=new yt,w=[];return t.getGlyphPack=function(n,t,i,e){var h=e.Tag,v=u.get(t),c=d.get(n),l,o,a;if(v){l={AccessKey:t,FontFamily:c.FontName,Tag:h,ErrorMessage:"",Code:200};i(l);return}b(h,t);o=p();o.onreadystatechange=function(){var w,p,b,l,a;if(o.readyState===4){if(o.status!==200&&o.status!==304){w={AccessKey:t,FontFamily:c.FontName,Tag:h,ErrorMessage:"AccessKey："+t+"字形包不存在，请联系有字库管理员!",Code:304};i(w);return}if(p=o.response,p){for(b=new Uint8Array(p),l=new f(b);l.offset<l.length;){var v=l.getUint16(l.offset,!1),d=l.getUint16(l.offset+2,!1),g=l.getUint16(l.offset+4,!1),k=l.getUint16(l.offset+6,!1),nt=l.toArray(l.offset+8,k);(l.offset+=k+8,s.has(n,v)||v===32||v===10)||(a=new y,a.Id=n,a.Unicode=v,a.LSB=d,a.HorizAdvX=g,a.GlyfTable=nt,a.HorizAdvX=a.HorizAdvX===65535?-1:a.HorizAdvX,s.set(a.Id,a.Unicode,a))}l.length>0?h?r(n,t,function(n){u.set(t,!0);i(n)},e):i({AccessKey:t,FontFamily:c.FontName,Tag:h,ErrorMessage:"",Code:200}):i({AccessKey:t,FontFamily:c.FontName,Tag:h,ErrorMessage:"字形包解析失败！",Code:304})}else i({AccessKey:t,FontFamily:c.FontName,Tag:"",ErrorMessage:"未找到字形包！",Code:404})}};a=ut+n+"/glyphs.pack";o.open("GET",a,!0);o.responseType="arraybuffer";o.send(null)},t.getInitFontInfo=function(n,t,i,r){pt(n,t,i,r)},t.getGlyfs=function(n,t,i,f,e){var l=e.Tag,h,c,o,a,v,y;for(b(l,i),ht=n,h=[],c=0;c<t.length;c++)(o=t[c],s.has(n,o)||h.indexOf(o)>-1||o===32||o===10)||h.push(o);if(h.length<=0){a=u.get(i);a?(v=d.get(n),y={AccessKey:i,FontFamily:v.FontName,Tag:l,ErrorMessage:"",Code:200},f(y)):r(n,i,f,e);return}at(h,n,i,f,e)},t.ApplyTagsStylesAppendHead=function(n,t){var u,r,i,f;if(n){if(u=w[n],r=ft(u),!r)return;i="font-family:";t?i+=it(t):i=" font-family:'"+r+"' ";f=n+"{"+i+"}";ot("yzk-"+n,f,null)}},t.getXhr=function(){return p()},t.GetAccesKey=function(n){return typeof n=="string"?n:n.AccessKey},t.getGlyphHeadMap=function(){return s},t.fullLoadIsRun=function(n){return u.get(n)},t}();return{FontProcessModule:si}}(),f=new s,u=new h,e=new c,o={getHeadMap:function(){return r.FontProcessModule.getGlyphHeadMap()},fullLoadIsRun:function(n){return r.FontProcessModule.fullLoadIsRun(n)}},l={$youzikuClient:u,$youzikuPromiseClient:e,$youzikuClientDebug:o};typeof exports!="undefined"?(exports.$youzikuClient=u,exports.$youzikuPromiseClient=e,exports.$youzikuClientDebug=o):(t.$youzikuClient=u,t.$youzikuPromiseClient=e,t.$youzikuClientDebug=o,typeof define!="undefined"&&define.amd&&define(function(){return l}))})(window,document);